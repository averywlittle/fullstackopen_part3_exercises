(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t(15),u=t.n(r),o=t(6),i=t(3),s=function(e){var n=e.persons;return""!==e.filter&&(n=e.persons.filter((function(n){return n.name.includes(e.filter)}))),n.map((function(n){return Object(c.jsxs)("div",{children:[n.name,", ",n.number,Object(c.jsx)("button",{onClick:function(){return e.removeContact(n)},children:"remove"})]},n.name)}))},l=function(e){return Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:e.addContact,type:"submit",children:"add"})})]})},d=function(e){return Object(c.jsxs)("div",{children:["filter via text: ",Object(c.jsx)("input",{value:e.filter,onChange:e.handleFilterChange})]})},f=t(4),j=t.n(f),b="/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},m=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e}))},v=function(e){var n=e.message,t=e.error;return null===n?null:!0===t?Object(c.jsx)("div",{className:"error",children:n}):Object(c.jsx)("div",{className:"message",children:n})},x=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),f=Object(i.a)(u,2),j=f[0],b=f[1],x=Object(a.useState)(""),g=Object(i.a)(x,2),w=g[0],C=g[1],N=Object(a.useState)(""),y=Object(i.a)(N,2),k=y[0],S=y[1],T=Object(a.useState)(null),A=Object(i.a)(T,2),E=A[0],F=A[1],J=Object(a.useState)(!1),B=Object(i.a)(J,2),D=B[0],I=B[1];Object(a.useEffect)((function(){console.log("effect"),h().then((function(e){console.log("promise fulfilled"),r(e)}))}),[]),console.log("render",t.length,"contacts");return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{message:E,error:D}),Object(c.jsx)(d,{filter:k,handleFilterChange:function(e){S(e.target.value)}}),Object(c.jsx)("h2",{children:"Add a new contact:"}),Object(c.jsx)(l,{addContact:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j}));if(n){if(window.confirm("".concat(n.name," already exists in the phonebook, update their number?"))){var c=Object(o.a)(Object(o.a)({},n),{},{number:w});O(n.id,c).then((function(e){e&&(r(t.map((function(n){return n.id!==e.id?n:e}))),C(""),b(""),F("'".concat(e.name,"' was edited successfully!")),setTimeout((function(){F(null)}),4500))})).catch((function(e){I(!0),F("".concat(e,", ").concat(e.response.data.error)),setTimeout((function(){F(null),I(!1)}),4500)}))}}else m({name:j,number:w}).then((function(e){e&&(r(t.concat(e)),C(""),b(""),F("'".concat(e.name,"' was added successfully!")),setTimeout((function(){F(null)}),4500))})).catch((function(e){I(!0),F("".concat(e,", ").concat(e.response.data.error)),setTimeout((function(){F(null),I(!1)}),4500)}))},newName:j,handleNameChange:function(e){b(e.target.value)},newNumber:w,handleNumberChange:function(e){C(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(s,{persons:t,filter:k,removeContact:function(e){window.confirm("Are you sure you want to delete ".concat(e.name))&&p(e.id).then((function(n){204===n.status&&(r(t.filter((function(n){return n.id!==e.id}))),F("'".concat(e.name,"' was removed successfully.")),setTimeout((function(){F(null)}),4500))}))}})]})};t(38);u.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fdc9885e.chunk.js.map